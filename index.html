<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ficha de Ordem Paranormal</title>

<!-- CSS - Global -->
<link rel="stylesheet" href="assets/css/global.css">

<!-- CSS - Components -->
<link rel="stylesheet" href="assets/css/components/nomes.css">
<link rel="stylesheet" href="assets/css/components/pericias.css">
<link rel="stylesheet" href="assets/css/components/atributos.css">
<link rel="stylesheet" href="assets/css/components/informacoes.css">
<link rel="stylesheet" href="assets/css/components/ataques.css">
<link rel="stylesheet" href="assets/css/components/habilidades.css">
<link rel="stylesheet" href="assets/css/components/rituais.css">
<link rel="stylesheet" href="assets/css/components/itens.css">
<link rel="stylesheet" href="assets/css/components/regras.css">
<link rel="stylesheet" href="assets/css/components/controles.css">
<link rel="stylesheet" href="assets/css/components/anotacoes.css">

</head>

<body>

<h1>FICHA DE ORDEM PARANORMAL</h1>

<!-- ===========================
      NOMES
=========================== -->
<div class="names names-ritual">
  <div class="name-block">
    <label>Nome do Personagem</label>
    <input id="nome_personagem" placeholder="Personagem">
  </div>

  <div class="name-block">
    <label>Nome do Jogador</label>
    <input id="nome_jogador" placeholder="Jogador">
  </div>
</div>



<div class="layout">

  <!-- PERÍCIAS -->
  <div class="card">
    <h2 class="titulo-secao">Perícias</h2>
    <div class="pericias-list" id="pericias"></div>
  </div>

  <!-- Coluna Direita -->
  <div class="right-column">

    <!-- ATRIBUTOS -->
    <div class="card card-attributes">
      <h2 class="titulo-secao">Atributos</h2>

      <div class="attr-wheel-box">
        <svg id="radar" viewBox="0 0 300 300">
          <image href="assets/img/Geral/Outro_Lado.png"
            x="0" y="0" width="300" height="300"
            opacity="0.12"
            style="filter: brightness(0.55) contrast(0.9);"
            preserveAspectRatio="xMidYMid meet"
          />
          <g id="guides"></g>
          <polygon id="radar-shape"></polygon>
          <polygon id="radar-outline"></polygon>
          <circle cx="150" cy="150" r="4" fill="#ff0000"/>
          <g id="labels"></g>
        </svg>
      </div>

      <div class="attr-inputs">
        <div><label>FOR</label><input type="number" id="FOR" min="0" max="10" value="1"></div>
        <div><label>AGI</label><input type="number" id="AGI" min="0" max="10" value="1"></div>
        <div><label>INT</label><input type="number" id="INT" min="0" max="10" value="1"></div>
        <div><label>PRE</label><input type="number" id="PRE" min="0" max="10" value="1"></div>
        <div><label>VIG</label><input type="number" id="VIG" min="0" max="10" value="1"></div>
      </div>
    </div>



    <!-- INFORMAÇÕES DO PERSONAGEM -->
    <div class="card card-infos">
      <h2 class="titulo-secao">Informações do Personagem</h2>

      <div class="info-fields">
        <div class="info-field">
          <label>Origem</label>
          <input type="text" id="origem" placeholder="Ex: Amnésico">
        </div>

        <div class="info-field">
          <label>Classe</label>
          <input type="text" id="classe" placeholder="Ex: Combatente">
        </div>

        <div class="info-field">
          <label>Trilha</label>
          <input type="text" id="trilha" placeholder="Ex: Operações Especiais">
        </div>
      </div>

      <div class="char-meta">
        <div class="meta-field">
          <label>NEX (%)</label>
          <input type="number" id="nex" placeholder="Ex: 35">
        </div>

        <div class="meta-field">
          <label>Nível</label>
          <input type="number" id="nivel" placeholder="Ex: 5">
        </div>

        <div class="meta-field">
          <label>Limite de PD / Rodada</label>
          <input type="number" id="limite_pd" placeholder="Ex: 2">
        </div>
      </div>

      <div class="game-info">
        <div class="game-box">
          <label>PV</label>
          <div class="double-field">
            <input id="pv_atual" type="number" placeholder="Atual">
            <input id="pv_max" type="number" placeholder="Máx">
          </div>
        </div>

        <div class="game-box">
          <label>PD</label>
          <div class="double-field">
            <input id="pd_atual" type="number" placeholder="Atual">
            <input id="pd_max" type="number" placeholder="Máx">
          </div>
        </div>

        <div class="game-box">
          <label>DEF</label>
          <div class="def-field">
            <input id="def_valor" type="number" placeholder="Ex: 12">
          </div>
          <div class="def-hint">10 + AGI + equipamentos + outros</div>
        </div>
      </div>

      <div class="extra-info">
        <div class="extra-field">
          <label>Resistências</label>
          <textarea id="resistencias" placeholder="Ex: Resistência a morte"></textarea>
        </div>

        <div class="extra-field">
          <label>Proteção</label>
          <textarea id="protecao" placeholder="Ex: Armadura leve (+5)"></textarea>
        </div>
      </div>

    </div>



    <!-- ATAQUES -->
    <div class="card card-attacks">
      <h2 class="titulo-secao">Ataques</h2>

      <div class="ataques-list">

        <div class="ataque-row">
          <input type="text" placeholder="Nome do ataque">
          <input type="text" placeholder="Teste (ex: 3d20 +5)">
          <input type="text" placeholder="Dano (ex: 1d8+2)">
          <input type="text" placeholder="Crítico (ex: 18 x3)">
        </div>

        <div class="ataque-row">
          <input type="text" placeholder="Nome do ataque">
          <input type="text" placeholder="Teste (ex: 3d20 +5)">
          <input type="text" placeholder="Dano (ex: 1d8+2)">
          <input type="text" placeholder="Crítico (ex: 18 x3)">
        </div>

        <div class="ataque-row">
          <input type="text" placeholder="Nome do ataque">
          <input type="text" placeholder="Teste (ex: 3d20 +5)">
          <input type="text" placeholder="Dano (ex: 1d8+2)">
          <input type="text" placeholder="Crítico (ex: 18 x3)">
        </div>

        <div class="ataque-row">
          <input type="text" placeholder="Nome do ataque">
          <input type="text" placeholder="Teste (ex: 3d20 +5)">
          <input type="text" placeholder="Dano (ex: 1d8+2)">
          <input type="text" placeholder="Crítico (ex: 18 x3)">
        </div>

        <div class="ataque-row">
          <input type="text" placeholder="Nome do ataque">
          <input type="text" placeholder="Teste (ex: 3d20 +5)">
          <input type="text" placeholder="Dano (ex: 1d8+2)">
          <input type="text" placeholder="Crítico (ex: 18 x3)">
        </div>

        <div class="ataque-row">
          <input type="text" placeholder="Nome do ataque">
          <input type="text" placeholder="Teste (ex: 3d20 +5)">
          <input type="text" placeholder="Dano (ex: 1d8+2)">
          <input type="text" placeholder="Crítico (ex: 18 x3)">
        </div>

        <div class="ataque-row">
          <input type="text" placeholder="Nome do ataque">
          <input type="text" placeholder="Teste (ex: 3d20 +5)">
          <input type="text" placeholder="Dano (ex: 1d8+2)">
          <input type="text" placeholder="Crítico (ex: 18 x3)">
        </div>

      </div>
    </div>

  </div><!-- fim right-column -->
</div><!-- fim layout -->



<!-- HABILIDADES -->
<div class="card card-habilidades">
  <h2 class="titulo-secao">Habilidades</h2>

  <div id="habilidades-list"></div>

  <button id="add-habilidade" class="btn-add">+ Adicionar Habilidade</button>
</div>


<!-- RITUAIS -->
<div class="card card-rituais">
  <h2 class="titulo-secao">Rituais</h2>

  <!-- Box DT Rituais (sempre visível) -->
  <div class="rituais-dt-box">
    <label>DT de Rituais</label>
    <input type="number" id="rituais_dt" placeholder="Ex: 20" min="0">
  </div>

  <div id="rituais-list"></div>

  <button id="add-ritual" class="btn-add">+ Adicionar Ritual</button>
</div>


<!-- ITENS -->
<div class="card card-itens">
  <h2 class="titulo-secao">Itens</h2>

  <div class="itens-top">

    <!-- CATEGORIAS -->
    <div class="categorias-card">
      <div class="titulo-sub">Categorias</div>

      <div class="categorias-grid">

        <div class="categoria-box" data-romano="I">
          <input type="number" id="cat1" placeholder="0">
        </div>

        <div class="categoria-box" data-romano="II">
          <input type="number" id="cat2" placeholder="0">
        </div>

        <div class="categoria-box" data-romano="III">
          <input type="number" id="cat3" placeholder="0">
        </div>

        <div class="categoria-box" data-romano="IV">
          <input type="number" id="cat4" placeholder="0">
        </div>

      </div>
    </div>

    <!-- CARGA -->
    <div class="carga-card">
      <div class="carga-box">
        <label>Carga Atual</label>
        <input type="number" id="carga_atual" placeholder="Ex: 4">
      </div>

      <div class="carga-box">
        <label>Carga Máxima</label>
        <input type="number" id="carga_max" placeholder="Ex: 6">
      </div>

    </div>

  </div>

  <div id="itens-list" class="itens-list"></div>

  <button id="add-item" class="btn-add">+ Adicionar Item</button>

</div>


<!-- ===========================
      REGRAS
=========================== -->
<div class="card card-regras">

  <h2 class="titulo-secao">Regras</h2>

<!-- CARD: COMBATE -->
<div class="regra-box">
  <div class="regra-header" data-target="#regra-combate">
    <h3>Combate</h3>
    <span class="toggle-icon">+</span>
  </div>

  <div id="regra-combate" class="regra-conteudo">

    <!-- MANOBRAS DE COMBATE -->
    <div class="subcard">
      <h4 class="subtitulo">Manobras de Combate</h4>
      <p class="subtexto">Formas de interação física com o adversário além do ataque, permitindo influenciar a situação de combate de maneira estratégica.</p>
      <ul class="sublista">
        <li><b>Agarrar:</b> Limita o movimento do adversário e dificulta ataques, enquanto mantém controle da situação.</li>
        <li><b>Derrubar:</b> Desequilibra o inimigo, criando oportunidades estratégicas ou dramáticas.</li>
        <li><b>Desarmar:</b> Retira armas ou itens, alterando a dinâmica do combate.</li>
        <li><b>Empurrar:</b> Move o inimigo, abrindo espaço para manobras adicionais.</li>
        <li><b>Quebrar:</b> Danifica ou destrói itens importantes do adversário.</li>
        <li><b>Atropelar:</b> Avança pelo espaço do inimigo, criando deslocamento estratégico.</li>
        <li><b>Fintar:</b> Movimento rápido e enganoso que deixa o adversário desprevenido.</li>
        <li><b>Preparar:</b> Antecipação de ações, aumentando tensão e narrativa.</li>
        <li><b>Usar Habilidade ou Item:</b> Poderes ou objetos podem alterar o curso do combate.</li>
      </ul>
    </div>

    <!-- CONJURAÇÃO COMPLEXA -->
    <div class="subcard">
      <h4 class="subtitulo">Conjuração Complexa</h4>
      <p class="subtexto">O ritual é dividido em <b>três etapas</b>, exigindo atenção, criatividade e habilidade do conjurador.</p>
      
      <ol class="sublista-ol">
        <li>
          <b>Desenhar o Símbolo:</b> Cria conexão com o outro lado. Material usado influencia efeitos:
          <ul class="elementos-list">
            <li class="sangue"><b>SANGUE:</b> Recupera 2d6 PV se passar no teste de Ocultismo. Rituais de dano de Sangue recebem 1 dado extra de dano; falha provoca sangramento.</li>
            <li class="morte"><b>MORTE:</b> DT aumenta +2; rituais de dano de Morte recebem 1 dado extra; falha aplica -2 em testes até fim da cena.</li>
            <li class="conhecimento"><b>CONHECIMENTO:</b> Limite de PE aumenta +2; rituais de dano de Conhecimento recebem 1 dado extra; requisitos de aprimoramento podem ser ignorados.</li>
            <li class="energia"><b>ENERGIA:</b> Passando no teste de Ocultismo, ganha ação de movimento extra; rituais de dano de Energia causam 1 dado extra; falha deixa alvo ofuscado.</li>
          </ul>
        </li>
        <li><b>Componentes Ritualísticos:</b> Sacrificar componentes adiciona +1d20 no teste de Ocultismo, representando energia canalizada.</li>
        <li><b>Invocando a Entidade:</b> Define círculo, alvos, PD gasto, e realiza teste de Ocultismo contra DT 20 + PD gastos. Sucesso: ritual se manifesta; falha: efeitos colaterais ainda acontecem.</li>
      </ol>

      <div class="narrativa-box">
        <h5>Narrativa</h5>
        <p>Detalhe cada ação: como o símbolo é traçado, componentes utilizados, palavras, gestos e emoções do conjurador. Mesmo rituais simples podem ser épicos.</p>
      </div>
    </div>

    <!-- AÇÕES NARRATIVAS -->
    <div class="subcard">
      <h4 class="subtitulo">Ações Narrativas</h4>
      <p class="subtexto">Jogadores podem realizar qualquer ação que desejarem, descrevendo intenções de forma criativa. Penalidades aplicam-se para equilibrar desafios:</p>
      <ul class="sublista">
        <li>Ação de <b>complexidade alta</b>: -1d20</li>
        <li>Ação de <b>complexidade extrema</b>: -2d20</li>
        <li>Use criatividade para moldar o mundo; só se impede se for impossível ou dados bloquearem.</li>
      </ul>
    </div>

    <!-- COREOGRAFIA DE LUTA -->
    <div class="subcard">
      <h4 class="subtitulo">Coreografia de Luta</h4>
      <p class="subtexto">Sequências de ataques podem ser descritas como duelos dramáticos. Cada golpe adicional aumenta penalidade em -1d20, mas multiplica dano até x3.</p>
    </div>

  </div>
</div>


<!-- CARD: INVESTIGAÇÃO -->
<div class="regra-box">
  <div class="regra-header" data-target="#regra-investigacao">
    <h3>Investigação</h3>
    <span class="toggle-icon">+</span>
  </div>

  <div id="regra-investigacao" class="regra-conteudo">
    <p>Durante cenas de investigação, os personagens podem realizar as seguintes ações:</p>
    <ul class="sublista">
      <li><b>Procurar Pistas:</b> Teste de perícia apropriada para encontrar pistas.</li>
      <li><b>Busca Obstinada:</b> Ganha +1d20 no teste, mas perde 1 de Sanidade.</li>
      <li><b>Facilitar Investigação:</b> Usa perícia para fornecer +2 em testes de aliados.</li>
      <li><b>Usar Habilidades/Itens:</b> Emprega um item ou habilidade relevante.</li>
      <li><b>Ajudar:</b> Ajuda outro personagem em seu teste.</li>
      <li><b>Recapitular:</b> Teste de INT (DT 15) para encontrar pista revisando o caso.</li>
      <li><b>Compartilhar:</b> Permite que outro personagem faça teste de INT (DT 15) para encontrar pista com informações fornecidas.</li>
    </ul>
  </div>
</div>

<!-- CARD: PERSEGUIÇÃO -->
<div class="regra-box">
  <div class="regra-header" data-target="#regra-perseguicao">
    <h3>Perseguição</h3>
    <span class="toggle-icon">+</span>
  </div>

  <div id="regra-perseguicao" class="regra-conteudo">
    <p>Perseguições são resolvidas com testes estendidos de <b>Atletismo</b>. Acumula-se 3 sucessos antes de 3 falhas para vencer.</p>
    <ul class="sublista">
      <li><b>Na Cena:</b> Personagem perde 1d4 PV na primeira rodada, 2d4 na segunda e assim por diante.</li>
      <li><b>Criar Obstáculo:</b> Teste de Força (DT 15) para reduzir DT dos adversários em –5. Apenas um personagem por rodada pode realizar.</li>
      <li><b>Despistar:</b> Substitui teste de Atletismo por Furtividade se já tiver 1 sucesso. Passa = +2 sucessos, falha = +2 falhas.</li>
      <li><b>Sacrifício:</b> Falha automática em Atletismo, mas fornece +0 em testes de aliados.</li>
      <li><b>Atrapalhar:</b> Teste de Luta para atrapalhar outra presa. Sucesso = -1d20 no teste de Atletismo dela.</li>
    </ul>
  </div>
</div>

<!-- CARD: INTERLÚDIO -->
<div class="regra-box">
  <div class="regra-header" data-target="#regra-interludio">
    <h3>Interlúdio</h3>
    <span class="toggle-icon">+</span>
  </div>

  <div id="regra-interludio" class="regra-conteudo">
    <p>Durante um interlúdio, um personagem pode realizar até <b>DUAS ações</b> da lista:</p>
    <ul class="sublista">
      <li><b>Alimentar-se:</b> Benefícios conforme o prato escolhido (Favorito: +2 PD, Nutritivo: dobra PV, Energético: dobra PD, Rápido: +5 em perícia ao revisar caso).</li>
      <li><b>Dormir:</b> Recupera PV; tipos de descanso: Normal (7 PV), Precária (½ PV), Confortável (2x PV), Luxuosa (3x PV).</li>
      <li><b>Exercitar-se:</b> +1d6 em testes de Agilidade, Força ou Vigor até o fim da missão. Máximo = Vigor.</li>
      <li><b>Ler:</b> +1d6 em testes de Intelecto ou Presença até o fim da missão. Máximo = Intelecto.</li>
      <li><b>Manutenção:</b> Conserta item quebrado, restaurando PV dele ao máximo.</li>
      <li><b>Relaxar:</b> Recupera PD, +1 PD para todos que realizarem a mesma ação no interlúdio.</li>
      <li><b>Revisar Caso:</b> Revisão de anotações ou cenas de investigação. Teste de perícia com DT definida normalmente.</li>
      <li><b>Fabricação em Campo:</b> Criação de itens conforme Profissão. DT varia de acordo com o item, kits reduzem penalidade em –5.</li>
    </ul>
  </div>
</div>

</div>


    <!-- ===========================
          ANOTAÇÕES
    =========================== -->
    <div class="card card-anotacoes">
      <h2 class="titulo-secao">Anotações</h2>

      <div class="anotacoes-grid">
        <div class="anotacao-block">
          <h4 class="subtitulo">Aparência</h4>
          <textarea id="anot_aparencia" placeholder="Descreva a aparência do personagem..."></textarea>
        </div>

        <div class="anotacao-block">
          <h4 class="subtitulo">Anotações</h4>
          <textarea id="anot_anotacoes" placeholder="Anotações gerais, ligações, ganchos de história..."></textarea>
        </div>

        <div class="anotacao-block">
          <h4 class="subtitulo">Outro</h4>
          <textarea id="anot_outro" placeholder="Outras observações..."></textarea>
        </div>
      </div>

    </div>



<!-- ===========================
      CONTROLES FINAIS
=========================== -->
<div class="bottom-controls" >

  <button id="download-json" class="btn-add">Salvar JSON</button>

  <label id="load-json" class="btn-add" style="cursor:pointer;">
    Carregar JSON
    <input id="file-input" type="file" accept=".json" style="display:none;">
  </label>

  <button id="export-pdf" class="btn-add">Exportar PDF</button>
  <button id="nova-ficha" class="btn-add">Nova Ficha</button>

  <div id="save-status" style="min-width:220px; text-align:left; color:#ffb3b3; font-size:14px;"></div>
</div>





<!-- JS -->
<script src="assets/js/utils.js" defer></script>
<script src="assets/js/pericias.js" defer></script>
<script src="assets/js/atributos.js" defer></script>
<script src="assets/js/radar.js" defer></script>
<script src="assets/js/informacoes.js" defer></script>
<script src="assets/js/main.js" defer></script>
<script src="assets/js/habilidades.js" defer></script>
<script src="assets/js/rituais.js" defer></script>
<script src="assets/js/itens.js" defer></script>

<!-- libs PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- sistema de salvar/carregar -->
<script src="assets/js/save_load.js"></script>

</body>
</html>


